<div class="side-margin">
  <table style="width: 100%">
  <tr>
    <td> <!-- Thats a little trick in order to keep table size consistent when switching quests -->
      <mat-form-field style="width: 100%">
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
      </mat-form-field>
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="min-width: 400px; width: 100%">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let quest"> {{quest.name}} </td>
        </ng-container>
        <ng-container matColumnDef="exp_reward">
          <th mat-header-cell *matHeaderCellDef> Exp Reward </th>
          <td mat-cell *matCellDef="let quest"> {{quest.exp_reward}} exp </td>
        </ng-container>
        <ng-container matColumnDef="gold_reward">
          <th mat-header-cell *matHeaderCellDef> Gold Reward </th>
          <td mat-cell *matCellDef="let quest"> {{quest.gold_reward}} gold </td>
        </ng-container>
        <ng-container matColumnDef="repetition_cycle">
          <th mat-header-cell *matHeaderCellDef> Repeat every </th>
          <td mat-cell *matCellDef="let quest">
             <div *ngIf="momentToDays(quest.repetition_cycle) !== '0'"> {{momentToDays(quest.repetition_cycle) }} days </div>
            <div *ngIf="momentToDays(quest.repetition_cycle) === '0'"> Never </div>
          </td>
        </ng-container>
        <tr  mat-header-row *matHeaderRowDef="questColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: questColumns"
            class="questTable"
            (click)="selectQuest(row)"
            ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td *ngIf="input.value === ''" class="mat-cell" colspan="4">No quests</td>
          <td *ngIf="input.value !== ''"class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
        </tr>
      </table>
    </td>
    <td *ngIf="selectedQuest" style="width: 30%">
      <table>
        <tr>
          <td colspan="2"><h1>{{selectedQuest.name}}</h1></td>
        </tr>
        <tr>
          <td colspan="2">{{selectedQuest.description}}</td>
        </tr>
        <tr>
          <td colspan="2">
            <h2>Rewards</h2>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <b>{{selectedQuest.exp_reward}}</b> experience points
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <b>{{selectedQuest.gold_reward}}</b> gold
          </td>
        </tr>
        <tr>
          <td>
            <button mat-stroked-button (click)="acceptQuest()">Accept</button>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

</div>
