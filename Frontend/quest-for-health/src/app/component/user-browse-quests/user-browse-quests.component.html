<div class="side-margin" style="padding-top: 1vw;">
  <mat-card class="mat-elevation-z2 my-transparent" style="height: 35vw;">
  <table style="width: 100%">
  <tr>
    <td> <!-- Thats a little trick in order to keep table size consistent when switching quests -->
      <mat-form-field style="width: 100%">
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
      </mat-form-field>
      <div style="overflow-y: scroll; height: 31vw">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="min-width: 400px; width: 100%">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let quest"> {{quest.name}} </td>
        </ng-container>
        <ng-container matColumnDef="exp_reward">
          <th mat-header-cell *matHeaderCellDef> Exp Reward </th>
          <td mat-cell *matCellDef="let quest"> {{quest.exp_reward}} exp </td>
        </ng-container>
        <ng-container matColumnDef="gold_reward">
          <th mat-header-cell *matHeaderCellDef> Gold Reward </th>
          <td mat-cell *matCellDef="let quest"> {{quest.gold_reward}} gold </td>
        </ng-container>
        <ng-container matColumnDef="repetition_cycle">
          <th mat-header-cell *matHeaderCellDef> Repeat every </th>
          <td mat-cell *matCellDef="let quest">
             <div *ngIf="momentToDays(quest.repetition_cycle) !== '0'"> {{momentToDays(quest.repetition_cycle) }} days </div>
            <div *ngIf="momentToDays(quest.repetition_cycle) === '0'"> Never </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="questColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: questColumns"
            class="questTable"
            (click)="selectQuest(row)"
            ></tr>
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td *ngIf="input.value === ''" class="mat-cell" colspan="4">No quests</td>
          <td *ngIf="input.value !== ''"class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
        </tr>
      </table>
      </div>
    </td>
    <td *ngIf="selectedQuest" style="width: 25%; padding-left: 1vw">
      <h1>{{selectedQuest.name}}</h1>
      <p style="padding-bottom: 1vw">{{selectedQuest.description}}</p>
      <b style="font-size: 20px">Rewards</b><br>
      <table>
        <tr>
          <td style="padding-right: 0.8vw"><b>{{selectedQuest.exp_reward}}</b> Experience Points</td>
          <td style="padding-right: 1.5vw"><b>{{selectedQuest.gold_reward}}</b> Gold</td>
          <td><button mat-stroked-button (click)="acceptQuest()">Accept</button></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
  </mat-card>
</div>
